<!DOCTYPE html>
<html style="width:100%;height:100%;background-color:black;">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
  <meta name="description" content="Eaglercraft Astra Client" />
  <meta name="keywords" content="eaglercraft, astra, minecraft, 1.8, 1.8.8" />
  <meta name="theme-color" content="#000000" />
  <title>EaglercraftX</title>
  <meta property="og:locale" content="en-US" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Astra 1.6" />
  <meta property="og:description" content="Custom Eaglercraft client hosted on Vercel" />
  <link rel="shortcut icon" href="./favicon.png" type="image/png" />
  <style>
    #loading_screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: black;
      color: white;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      text-align: center;
    }
    #loading_text {
      font-size: 3em;
      font-weight: bold;
      margin-bottom: 0.3em;
    }
    #loading_subtext {
      font-size: 1em;
      opacity: 0.8;
      margin-bottom: 2em;
      max-width: 80%;
    }
    #progress_bar { /* fake progress bar lol */
      width: 60%;
      height: 20px;
      background-color: #333;
      border-radius: 10px;
      overflow: hidden;
    }
    #progress_fill { 
      width: 0%;
      height: 100%;
      background-color: #8000ff;
      transition: width 0.3s ease;
    }
  </style>
  <script src="./classes.js"></script>
  <script>
    "use strict";
    window.addEventListener("load", function() {
      if (window.location.href.indexOf("file:") === 0) {
        alert("HTTP please — do not open this file locally. Run a local server or deploy online.");
      } else {
        var relayId = Math.floor(Math.random() * 3);
        window.eaglercraftXOpts = {
          demoMode: false,
          container: "game_frame",
          assetsURI: "./assets.epk",
          localesURI: "./lang/",
          worldsDB: "worlds",
          logInvalidCerts: true,
          crashOnUncaughtExceptions: true,
          servers: [
  { addr: "ws://localhost:8081/", name: "Local test server" },
  { addr: "wss://mc.lampnetwork.xyz/", name: "Lamp Network", locked: true },
  { addr: "wss://vanillamc.org/", name: "VanillaMC", locked: true }
],
          relays: [
            { addr: "wss://relay.deev.is/", comment: "Relay #1", primary: relayId === 0 },
            { addr: "wss://relay.lax1dude.net/", comment: "Relay #2", primary: relayId === 1 },
            { addr: "wss://relay.shhnowisnottheti.me/", comment: "Relay #3", primary: relayId === 2 }
          ]
        };

        var q = window.location.search;
        if (typeof q === "string" && q[0] === "?" && typeof window.URLSearchParams !== "undefined") {
          q = new window.URLSearchParams(q);
          var s = q.get("server");
          if (s) window.eaglercraftXOpts.joinServer = s;
        }

        let progress = 0; // fake progress bar animation lol
        const fill = document.getElementById("progress_fill");
        const interval = setInterval(() => {
          progress += Math.random() * 10;
          if (progress >= 100) {
            progress = 100;
            clearInterval(interval);
          }
          fill.style.width = progress + "%";
        }, 200);

        const hideLoading = () => {
          const loading = document.getElementById("loading_screen");
          if (loading) loading.style.display = "none";
        };

        const originalMain = window.main;
        window.main = function() {
          hideLoading();
          originalMain();
        };

        setTimeout(() => {
          main();
        }, 5000);
      }
    });
  </script>
  <noscript>
    <style>
      body {
        background-color: black;
        color: white;
        font-family: sans-serif;
        text-align: center;
        padding: 2em;
      }
    </style>
    <p>Eaglercraft requires JavaScript to run. Please enable it in your browser settings.</p>
  </noscript>
</head>
<body style="margin:0px;width:100%;height:100%;overflow:hidden;background-color:black;" id="game_frame">
  <div id="loading_screen">
    <div id="loading_text">Loading...</div>
    <div id="loading_subtext">Only English, Spanish, and French are available — too lazy to copy all the lang files.<br/>❌Fluxxy.</div>
    <div id="progress_bar"><div id="progress_fill"></div></div>
  </div>
</body>
</html>
